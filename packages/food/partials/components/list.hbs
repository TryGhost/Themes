{{!--
    Parameters:
    * layout (grid, magazine)
    * count (number)
    * column (number)
    * slug (tag)
    * sameRatio (true, false)
--}}

<div class="gh-list{{#match layout "magazine"}} grid magazine{{else match layout "grid"}} grid{{/match}}{{#if sameRatio}} has-same-ratio{{/if}}" data-column="{{column}}">
    {{#if slug}}
        {{#get "tags" filter="slug:{{slug}}"}}
            {{#foreach tags}}
                <header class="gh-list-header">
                    <h2 class="gh-list-title">{{name}}</h2>
                    <a href="{{url}}">View all</a>
                </header>
            {{/foreach}}
        {{/get}}
    {{else}}
        <header class="gh-list-header">
            <h2 class="gh-list-title">Latest</h2>
            <a href="{{url}}">View all</a>
        </header>
    {{/if}}
    <div class="gh-list-feed">
        {{#if slug}}
            {{#get "posts" filter="tag:{{slug}}" limit=count}}
                {{#foreach posts}}
                    <article class="gh-list-item">
                        {{#if feature_image}}
                            <figure class="gh-list-item-image">
                                <img
                                    srcset="{{img_url feature_image size="s"}} 300w,
                                            {{img_url feature_image size="m"}} 720w,
                                            {{img_url feature_image size="l"}} 960w,
                                            {{img_url feature_image size="xl"}} 1200w,
                                            {{img_url feature_image size="xxl"}} 2000w"
                                    sizes="(max-width: 1200px) 100vw, 1200px"
                                    src="{{img_url feature_image size="m"}}"
                                    alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}"
                                >
                            </figure>
                        {{/if}}
                        <div class="gh-list-item-content">
                            <h3 class="gh-list-item-title">{{title}}</h3>
                        </div>
                    </article>
                {{/foreach}}
            {{/get}}
        {{else}}
            {{#get "posts" limit=count}}
                {{#foreach posts}}
                    <article class="gh-list-item">
                        {{#if feature_image}}
                            <figure class="gh-list-item-image">
                                <img
                                    srcset="{{img_url feature_image size="s"}} 300w,
                                            {{img_url feature_image size="m"}} 720w,
                                            {{img_url feature_image size="l"}} 960w,
                                            {{img_url feature_image size="xl"}} 1200w,
                                            {{img_url feature_image size="xxl"}} 2000w"
                                    sizes="(max-width: 1200px) 100vw, 1200px"
                                    src="{{img_url feature_image size="m"}}"
                                    alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}"
                                >
                            </figure>
                        {{/if}}
                        <div class="gh-list-item-content">
                            <h3 class="gh-list-item-title">{{title}}</h3>
                        </div>
                    </article>
                {{/foreach}}
            {{/get}}
        {{/if}}
    </div>
</div>

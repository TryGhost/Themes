{{!--
    Parameters:
    * layout (grid, magazine)
    * count (number)
    * column (number)
    * slug (tag)
    * showHeader (true, false)
    * sameRatio (true, false)
--}}

<div class="gh-list{{#match layout "magazine"}} grid magazine{{else match layout "grid"}} grid{{/match}}{{#if sameRatio}} has-same-ratio{{/if}} gh-outer" data-column="{{column}}">
    <div class="gh-list-inner gh-inner">

        {{#if showHeader}}
            {{#if slug}}
                {{#get "tags" filter="slug:{{slug}}"}}
                    {{#foreach tags}}
                        <header class="gh-list-header">
                            <h2 class="gh-list-title">{{name}}</h2>
                            <a class="gh-list-action" href="{{url}}">View all</a>
                        </header>
                    {{/foreach}}
                {{/get}}
            {{else}}
                <header class="gh-list-header">
                    <h2 class="gh-list-title">Latest</h2>
                    <a class="gh-list-action" href="{{url}}">View all</a>
                </header>
            {{/if}}
        {{/if}}

        <div class="gh-list-feed">
            {{#if slug}}
                {{#get "posts" include="tags,authors" filter="tag:{{slug}}" limit=count}}
                    {{#foreach posts}}
                        {{> components/list-item 
                            showPrimaryTag=../../showPrimaryTag
                            showExcerpt=../../showExcerpt
                            showPrimaryAuthor=../../showPrimaryAuthor
                            showPublishedAt=../../showPublishedAt
                            showReadingTime=../../showReadingTime}}
                    {{/foreach}}
                {{/get}}
            {{else}}
                {{#get "posts" include="tags,authors" limit=count}}
                    {{#foreach posts}}
                        {{> components/list-item 
                            showPrimaryTag=../../showPrimaryTag
                            showExcerpt=../../showExcerpt
                            showPrimaryAuthor=../../showPrimaryAuthor
                            showPublishedAt=../../showPublishedAt
                            showReadingTime=../../showReadingTime}}
                    {{/foreach}}
                {{/get}}
            {{/if}}
        </div>

    </div>
</div>
